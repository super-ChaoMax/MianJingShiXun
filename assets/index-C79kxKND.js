import{_ as T,r,u as J,c as M,e as s,a as t,a1 as m,Q as B,a2 as d,f as C,a3 as c,a4 as u,a5 as I,Z as z,d as D,o as F}from"./index-IQsjkGjj.js";import{g as S,s as V}from"./mianjing-BRxc7wPw.js";import{J as H}from"./JumpTip-CgpBIgC1.js";const R="/MianJingShiXun/assets/wallhaven-wyzxvr-C5ua3727.webp",N={id:"app"},U={class:"header-wrap"},$={class:"text-lg"},A={class:"text-lg"},E={class:"main"},Q={class:"article-header"},X={class:"article-title"},Z={class:"article-meta"},G=["src"],K={class:"article-actions"},O={class:"action-btn"},P={class:"article-content"},W=["innerHTML"],Y={class:"interactive"},ss={class:"interactive-actions"},es={class:"interactive-comment"},as={class:"comment-input-wrap"},ls={__name:"index",setup(ts){const v=J(),g=D(),q=r();console.log("当前路由的参数",v);const p=r(!1),w=r("/shoye/zhuye"),y=a=>{g.push(a),p.value=!1},j=()=>{alert("您的操作会带来未知的危险请禁止！！！"),window.location.reload()};v.query.MJID||(p.value=!0);const l=r({});(async()=>{const a=await S(v.query.MJID);l.value=a.data,console.log("详情页",l.value),console.log(l.value.collectFlag),console.log(l.value.collectFlag===1),o.value=l.value.likeFlag===1,i.value=l.value.collectFlag===1})();const o=r(!1),i=r(!1),h=r(""),L=()=>{g.go(-1),v.query.HTURL&&g.push(`/shoye/${v.query.HTURL}`)},_=()=>{console.log("分享文章");const a=event.target.closest("button");a&&(a.classList.add("scale-95"),setTimeout(()=>a.classList.remove("scale-95"),100))},b=async a=>{const e=await V(v.query.MJID,a);console.log("点赞和收藏",e)},k=()=>{o.value=!o.value,l.value.likeCount=o.value?l.value.likeCount*1+1:l.value.likeCount*1-1,b(1);const a=event.target.closest("button");a&&(a.classList.add("scale-95"),setTimeout(()=>a.classList.remove("scale-95"),100))},f=()=>{i.value=!i.value;const a=event.target.closest("button");b(2),a&&(a.classList.add("scale-95"),setTimeout(()=>a.classList.remove("scale-95"),100))};return(a,e)=>{const n=B;return F(),M(z,null,[s("div",N,[s("header",{class:m(["header",{scrolled:q.value}])},[s("div",U,[s("button",{class:"header-btn",onClick:L},[s("span",$,[t(n,{name:"revoke",class:"fanhui"})])]),e[2]||(e[2]=s("h1",{class:"header-title"},"文章详情",-1)),s("button",{class:"header-btn",onClick:_},[s("span",A,[t(n,{name:"share-o",class:"fenxiang"})])])])],2),s("main",E,[s("div",Q,[s("h1",X,d(l.value.stem),1),s("div",Z,[s("img",{src:l.value.avatar,alt:"作者头像",class:"avatar"},null,8,G),s("span",null,d(l.value.creator),1),s("span",null,[t(n,{name:"underway-o",class:"shijian"}),C(" "+d(l.value.createdAt),1)]),s("span",null,[t(n,{name:"eye-o",class:"guankan"}),C(" "+d(l.value.views),1)])]),s("div",K,[s("button",{class:"action-btn",onClick:k},[s("span",{class:m({liked:o.value})},[c(t(n,{name:"good-job",class:"likequer"},null,512),[[u,o.value]]),c(t(n,{name:"good-job",class:"likeqx"},null,512),[[u,!o.value]])],2),s("span",null,d(l.value.likeCount),1)]),s("button",{class:"action-btn",onClick:f},[s("span",{class:m({collected:i.value})},[c(t(n,{name:"star",class:"scquer"},null,512),[[u,i.value]]),c(t(n,{name:"star",class:"scqx"},null,512),[[u,!i.value]])],2),e[3]||(e[3]=s("span",null,"收藏",-1))]),s("button",O,[s("span",null,[t(n,{name:"share",class:"fenxiang"})]),e[4]||(e[4]=s("span",null,"分享",-1))])])]),e[10]||(e[10]=s("div",{class:"article-cover-wrap"},[s("img",{src:R,alt:"文章封面",class:"article-cover"})],-1)),s("div",P,[s("div",{innerHTML:l.value.content},null,8,W)]),s("div",Y,[e[9]||(e[9]=s("div",{class:"interactive-header"},[s("h3",{class:"interactive-title"},"互动区"),s("button",{class:"view-all"},"查看全部")],-1)),s("div",ss,[s("button",{class:"interactive-btn",onClick:k},[s("span",{class:m({liked:o.value})},[c(t(n,{name:"good-job",class:"likequer"},null,512),[[u,o.value]]),c(t(n,{name:"good-job",class:"likeqx"},null,512),[[u,!o.value]])],2),s("span",null,"点赞 ("+d(l.value.likeCount)+")",1)]),s("button",{class:"interactive-btn",onClick:f},[s("span",{class:m({collected:i.value})},[c(t(n,{name:"star",class:"scquer"},null,512),[[u,i.value]]),c(t(n,{name:"star",class:"scqx"},null,512),[[u,!i.value]])],2),e[5]||(e[5]=s("span",null,"收藏",-1))]),s("button",{class:"interactive-btn",onClick:_},[s("span",null,[t(n,{name:"share",class:"fenxiang"})]),e[6]||(e[6]=s("span",null,"分享",-1))])]),s("div",es,[s("div",as,[e[7]||(e[7]=s("img",{src:"https://picsum.photos/id/91/32/32",alt:"评论用户头像",class:"comment-avatar"},null,-1)),c(s("input",{type:"text",placeholder:"写下你的想法...",class:"comment-input","onUpdate:modelValue":e[0]||(e[0]=x=>h.value=x)},null,512),[[I,h.value]])]),e[8]||(e[8]=s("div",{class:"more-comments"}," 查看更多精彩评论 ",-1))])])])]),t(H,{visible:p.value,"tip-text":"您没有选中任意面经！即将为您跳转到面经首页",duration:3,target:w.value,"is-external":!1,onClose:e[1]||(e[1]=x=>p.value=!1),onJump:y,onMjxqzs:j},null,8,["visible","target"])],64)}}},us=T(ls,[["__scopeId","data-v-aba239d4"]]);export{us as default};
